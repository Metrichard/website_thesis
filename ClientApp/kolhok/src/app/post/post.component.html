<div class="container" *ngIf="shouldShow">
    <button class="btn btn-primary" *ngIf="authService.isUserLoggedIn()" type="button" (click)="editPost()">Edit</button>

    <h1>{{post.title}}</h1>
    <p>
        {{post.text}}
    </p>
    <div class="text-muted">{{post.publicationDate | date}}</div>
    <div class="text-muted">{{post.author}}</div>
</div>

<div *ngIf="authService.isUserLoggedIn() && isEditing">
    <h1 *ngIf="isNew">Create a new post</h1>
    <h1 *ngIf="!isNew">Edit post</h1>
    <button class="btn btn-primary" *ngIf="authService.isUserLoggedIn()" type="button" (click)="editPost()">Quit Editing</button>
    <div class="container">
        <div class="alert alert-warning" *ngIf="postForm.invalid && postForm.dirty">A cím és a cikk nem lehet üres</div>
        <form (ngSubmit)="!postForm.invalid && saveOrUpdate()" #postForm="ngForm">
            <fieldset class="form-group">
                <label>Cím</label>
                <input type="text" class="form-control" required="required" minlength="5" [(ngModel)]="post.title" name="title">
            </fieldset>
            <fieldset class="form-group">
                <label>Cikk szövege</label>
                <textarea cols="30" rows="10" class="form-control" required="required" [(ngModel)]="post.text" name="text"></textarea>
            </fieldset>
            <fieldset class="form-group">
                <label>Tag</label>
                <!--<mat-form-field appearance="fill">
                    <mat-label>Tag</mat-label>
                    <mat-select>
                        <mat-option *ngFor="let tag of tags" [value]="post.tag">
                            {{tag.name}}
                        </mat-option>
                    </mat-select>
                </mat-form-field> -->
            </fieldset>
            <fieldset>
                <div class="form-group form-check">
                    <input class="form-check-input" type="checkbox" [(ngModel)]="post.isPinned" name="isPinned">
                    <label class="form-check-label">Is Pinned</label>
                </div>
            </fieldset>
            <fieldset>
                <div class="form-group form-check">
                    <input class="form-check-input" type="checkbox" [(ngModel)]="post.isHidden" name="isHidden">
                    <label class="form-check-label">Is Hidden</label>
                </div>
            </fieldset>

            <div class="text-muted">{{post.publicationDate | date}}</div>
            <div class="text-muted"  [(ngModel)]="post.author" [ngModelOptions]="{standalone: true}">{{authService.getAuthenticatedUser()}}</div>
            <button type="submit" class="btn btn-success">Mentés</button>
            <button type="button" class="btn btn-danger float-right" (click)="deletePost(post.id)">Törlés</button>
        </form>
    </div>
</div>